{
  "$defs": {
    "OutlineMetadata": {
      "description": "Metadata about the generated outline.",
      "properties": {
        "content_type": {
          "enum": [
            "article",
            "story"
          ],
          "title": "Content Type",
          "type": "string"
        },
        "detected_language": {
          "pattern": "^[a-z]{2}$",
          "title": "Detected Language",
          "type": "string"
        },
        "depth": {
          "maximum": 6,
          "minimum": 1,
          "title": "Depth",
          "type": "integer"
        },
        "sections_count": {
          "minimum": 0,
          "title": "Sections Count",
          "type": "integer"
        },
        "generated_at": {
          "format": "date-time",
          "title": "Generated At",
          "type": "string"
        },
        "notes": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Notes"
        },
        "classification_confidence": {
          "default": 0.8,
          "description": "Classification confidence score",
          "maximum": 1.0,
          "minimum": 0.0,
          "title": "Classification Confidence",
          "type": "number"
        },
        "classification_method": {
          "default": "rule_based",
          "description": "Method used for classification",
          "enum": [
            "rule_based",
            "llm_single",
            "llm_double"
          ],
          "title": "Classification Method",
          "type": "string"
        },
        "classification_reasoning": {
          "default": "Rule-based classification",
          "description": "Why this classification was chosen",
          "minLength": 1,
          "title": "Classification Reasoning",
          "type": "string"
        },
        "key_indicators": {
          "description": "Key content indicators found",
          "items": {
            "type": "string"
          },
          "title": "Key Indicators",
          "type": "array"
        },
        "llm_calls_used": {
          "default": 0,
          "description": "Number of LLM calls made",
          "maximum": 2,
          "minimum": 0,
          "title": "Llm Calls Used",
          "type": "integer"
        },
        "processing_time_ms": {
          "default": 0,
          "description": "Total processing time in milliseconds",
          "minimum": 0,
          "title": "Processing Time Ms",
          "type": "integer"
        },
        "interim_available": {
          "default": false,
          "description": "Whether interim classification was requested",
          "title": "Interim Available",
          "type": "boolean"
        }
      },
      "required": [
        "content_type",
        "detected_language",
        "depth",
        "sections_count",
        "generated_at"
      ],
      "title": "OutlineMetadata",
      "type": "object"
    },
    "Section": {
      "description": "Individual outline section with hierarchical support.",
      "properties": {
        "title": {
          "minLength": 1,
          "title": "Title",
          "type": "string"
        },
        "id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Stable slug/identifier",
          "title": "Id"
        },
        "level": {
          "default": 1,
          "description": "Heading level (1=H1, 2=H2, ...)",
          "maximum": 6,
          "minimum": 1,
          "title": "Level",
          "type": "integer"
        },
        "summary": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "1-3 sentence section synopsis",
          "title": "Summary"
        },
        "key_points": {
          "description": "Bullet points for section",
          "items": {
            "type": "string"
          },
          "title": "Key Points",
          "type": "array"
        },
        "word_count_estimate": {
          "anyOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Estimated word count",
          "title": "Word Count Estimate"
        },
        "subsections": {
          "description": "Nested subsections",
          "items": {
            "$ref": "#/$defs/Section"
          },
          "title": "Subsections",
          "type": "array"
        }
      },
      "required": [
        "title"
      ],
      "title": "Section",
      "type": "object"
    }
  },
  "description": "Complete outline response structure.",
  "properties": {
    "meta": {
      "$ref": "#/$defs/OutlineMetadata"
    },
    "outline": {
      "description": "Top-level sections",
      "items": {
        "$ref": "#/$defs/Section"
      },
      "minItems": 1,
      "title": "Outline",
      "type": "array"
    }
  },
  "required": [
    "meta",
    "outline"
  ],
  "title": "OutputModel",
  "type": "object"
}